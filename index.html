<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Horror - Beranda</title>
<style>
  body{font-family:Arial,Helvetica,sans-serif;margin:0;background:#f5f5f5;color:#111}
  header{background:#b71c1c;color:#fff;padding:14px;text-align:center}
  .container{max-width:1000px;margin:18px auto;padding:12px}
  .banner{display:flex;gap:8px;overflow:auto;padding-bottom:8px}
  .banner img{height:220px;border-radius:8px;object-fit:cover}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px;margin-top:12px}
  .card{background:#fff;padding:10px;border-radius:8px;box-shadow:0 1px 6px rgba(0,0,0,.08)}
  .card img{width:100%;height:160px;object-fit:cover;border-radius:6px}
  a.btn{display:inline-block;padding:8px 12px;background:#111;color:#fff;border-radius:6px;text-decoration:none}
</style>
</head>
<body>
<header><h1>Horror - Brand</h1></header>
<div class="container">
  <section>
    <h2>Banner</h2>
    <div id="bannerContainer" class="banner">Loading banner...</div>
  </section>

  <section>
    <div style="display:flex;justify-content:space-between;align-items:center">
      <h2>Terbaru</h2>
      <a class="btn" href="shop.html">Lihat Semua</a>
    </div>
    <div id="productGrid" class="grid">Loading produk...</div>
  </section>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
  // === GANTI dengan firebaseConfig milikmu
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDKZlCOgSliF6doVyCF46inqrHf9C_9FhU",
  authDomain: "horror-b09d2.firebaseapp.com",
  projectId: "horror-b09d2",
  storageBucket: "horror-b09d2.firebasestorage.app",
  messagingSenderId: "636634426334",
  appId: "1:636634426334:web:b8d5ad069be30ac7be8b4f",
  measurementId: "G-ZHF9H692FM"
};
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  async function loadBanners(){
    const cont = document.getElementById('bannerContainer');
    cont.innerHTML = '';
    const snap = await db.collection('tb_banner').orderBy('urutan','asc').get();
    if(snap.empty){ cont.innerHTML = '<p>Belum ada banner</p>'; return; }
    snap.forEach(doc=>{
      const img = document.createElement('img');
      img.src = doc.data().gambar_url || '';
      img.alt = 'banner';
      img.style.minWidth = '300px';
      cont.appendChild(img);
    });
  }

  async function loadProducts(){
    const grid = document.getElementById('productGrid');
    grid.innerHTML = '';
    const snap = await db.collection('tb_produk').where('status','==','aktif').orderBy('nama').limit(8).get();
    if(snap.empty){ grid.innerHTML = '<p>Belum ada produk</p>'; return; }
    snap.forEach(doc=>{
      const d = doc.data();
      const card = document.createElement('div'); card.className='card';
      card.innerHTML = `<img src="${d.gambar_thumb||''}" alt="${d.nama}">
        <h3 style="font-size:15px;margin:8px 0">${d.nama}</h3>
        <p style="margin:4px 0">Rp ${Number(d.harga||0).toLocaleString()}</p>
        <a class="btn" href="product.html?id=${doc.id}">Detail</a>`;
      grid.appendChild(card);
    });
  }

  loadBanners();
  loadProducts();
</script>
</body>
</html>